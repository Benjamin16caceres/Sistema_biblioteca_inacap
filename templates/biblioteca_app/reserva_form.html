{% extends 'biblioteca_app/base.html' %}

{% block content %}
<div class="sala-card">
    <h1 class="page-title">Reservar: {{ sala.nombre }}</h1>
    
    <form method="post">
        {% csrf_token %}
        
        <div class="form-group">
            <label class="form-label">RUT:</label>
            {{ form.rut }}
            {% if form.rut.errors %}
            <div style="color: #e53e3e; margin-top: 0.5rem;">
                {{ form.rut.errors }}
            </div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label class="form-label">Fecha de reserva:</label>
            {{ form.fecha }}
            {% if form.fecha.errors %}
            <div style="color: #e53e3e; margin-top: 0.5rem;">
                {{ form.fecha.errors }}
            </div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label class="form-label">Hora de inicio:</label>
            {{ form.hora_inicio }}
            {% if form.hora_inicio.errors %}
            <div style="color: #e53e3e; margin-top: 0.5rem;">
                {{ form.hora_inicio.errors }}
            </div>
            {% endif %}
            <span class="form-help">La reserva durar√° 2 horas desde la hora seleccionada</span>
        </div>
        
        {{ form.fecha_inicio }}
        {{ form.fecha_termino }}
        
        <div class="btn-group">
            <button type="submit" class="btn btn-primary">Confirmar Reserva</button>
            <a href="{% url 'biblioteca_app:sala_detail' sala.id %}" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
</div>

<!-- Horarios disponibles -->
<div class="sala-card">
    <h3>Horarios Disponibles para el {{ fecha|date:"d/m/Y" }}</h3>
    {% if horarios_disponibles %}
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-top: 1rem;">
        {% for horario in horarios_disponibles %}
        <div style="text-align: center; padding: 1rem; background: #48bb78; color: white; border-radius: 8px;">
            <strong>{{ horario|time:"H:i" }}</strong>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p style="color: #718096; text-align: center;">No hay horarios disponibles para esta fecha</p>
    {% endif %}
</div>
{% endblock %}